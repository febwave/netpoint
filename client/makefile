all:npclient

CC = g++
AR = ar

INCLUDE = .
INCLUDE_GNU = /usr/include/x86_64-linux-gnu
INCLUDE_USR = /usr/include 
INCLUDE_JSON = ../json
INCLUDE_PRJ = ../include 

GTK_INC = $(shell pkg-config --cflags gtk+-2.0)
GTK_LIB = $(shell pkg-config --libs gtk+-2.0)
SQLITE_LIB = -lsqlite3
GTK_EXPORT = -export-dynamic

CFlAGS_XML = `xml2-config --cflags`

LIBS_XML = `xml2-config --libs`

INCLUDE += -I$(INCLUDE_GNU)
INCLUDE += -I$(INCLUDE_USR)

INCLUDE += -I$(INCLUDE_PRJ)

LIB_JSON = -ljson_linux-gcc-4.7_libmt


LIBS += $(LIB_JSON)

LIBS += $(GTK_LIB) 

LIBS += $(GTK_EXPORT) 

LIBS += $(SQLITE_LIB)
LIBS += $(LIBS_XML)

CPPFLAGS = -g3 -ggdb -Wall -ansi

FILE_MAIN = main.cpp
FILE_CONTROLS = controls.cpp
FILE_PROCEDURE = procedure.cpp
FILE_XMLCFG = xmlcfg.cpp
FILE_SQLITEHELPER = SqliteHelper.cpp
FILE_SQLITELIB= SqliteLib.cpp
FILE_SQLITEWRAP = sqlitewrap.cpp
FILE_SQLITEFUNC = sqliteFunc.cpp

FILE_JSONREADER = JsonReader.cpp
FILE_JSONWRITER = JsonWriter.cpp
FILE_JSONVALUE = JsonValue.cpp
FILE_CONTROLSROUTE = controlsRoute.cpp
FILE_NETREQUEST = netrequest.cpp

OBJ_MAIN = main.o
OBJ_CONTROLS = controls.o
OBJ_CONTROLSROUTE = controlsRoute.o
OBJ_PROCEDURE = procedure.o
OBJ_XMLCFG = xmlcfg.o
OBJ_SQLITEHELPER = SqliteHelper.o
OBJ_SQLITELIB= SqliteLib.o
OBJ_SQLITEWRAP = sqlitewrap.o
OBJ_SQLITEFUNC = sqliteFunc.o

OBJ_JSONREADER = JsonReader.o
OBJ_JSONWRITER = JsonWriter.o
OBJ_JSONVALUE = JsonValue.o

OBJ_NETREQUEST = netrequest.o

$(OBJ_MAIN): $(FILE_MAIN) $(OBJ_CONTROLS) $(OBJ_PROCEDURE) $(OBJ_SQLITEFUNC) $(OBJ_JSONREADER) $(OBJ_JSONWRITER) $(OBJ_JSONVALUE) $(OBJ_NETREQUEST) $(OBJ_XMLCFG)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_MAIN)

$(OBJ_CONTROLS): $(FILE_CONTROLS) $(OBJ_CONTROLSROUTE)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_CONTROLS)

$(OBJ_CONTROLSROUTE): $(FILE_CONTROLSROUTE)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_CONTROLSROUTE)

$(OBJ_PROCEDURE): $(FILE_PROCEDURE) 
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_PROCEDURE)


$(OBJ_SQLITEWRAP): $(FILE_SQLITEWRAP)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_SQLITEWRAP)

$(OBJ_SQLITEHELPER): $(FILE_SQLITEHELPER)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_SQLITEHELPER)


$(OBJ_SQLITELIB): $(FILE_SQLITELIB)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_SQLITELIB)

$(OBJ_SQLITEFUNC): $(FILE_SQLITEFUNC)
	$(CC) -I$(INCLUDE) $(GTK_INC) $(CPPFLAGS) -c $(FILE_SQLITEFUNC)

$(OBJ_JSONREADER) : $(FILE_JSONREADER)
	$(CC) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(FILE_JSONREADER)

$(OBJ_JSONWRITER) : $(FILE_JSONWRITER)
	$(CC) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(FILE_JSONWRITER)

$(OBJ_JSONVALUE) : $(FILE_JSONVALUE)
	$(CC) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(FILE_JSONVALUE)

$(OBJ_NETREQUEST) : $(FILE_NETREQUEST)
	$(CC) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(FILE_NETREQUEST)

$(OBJ_XMLCFG): $(FILE_XMLCFG)
	$(CC)  -I$(INCLUDE)  $(CPPFLAGS) $(CFlAGS_XML) -c  $(FILE_XMLCFG)

OBJ_LIST = $(OBJ_MAIN)

OBJ_LIST += $(OBJ_CONTROLS)

OBJ_LIST += $(OBJ_CONTROLSROUTE)

OBJ_LIST += $(OBJ_PROCEDURE)

OBJ_LIST += $(OBJ_SQLITELIB)

OBJ_LIST += $(OBJ_SQLITEWRAP)

OBJ_LIST += $(OBJ_SQLITEHELPER)

OBJ_LIST += $(OBJ_SQLITEFUNC)

OBJ_LIST += $(OBJ_JSONREADER)

OBJ_LIST += $(OBJ_JSONWRITER)

OBJ_LIST += $(OBJ_JSONVALUE)

OBJ_LIST += $(OBJ_NETREQUEST)

OBJ_LIST += $(OBJ_XMLCFG)

npclient: $(OBJ_LIST)  
	$(CC)  -o npclient $(OBJ_LIST)  $(LIBS)  


clean:
	-rm *.o 

    
