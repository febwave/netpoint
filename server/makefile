all:npsvr  

CC = g++
CPLUSPLUS = g++
AR = ar

INCLUDE = . 
INCLUDE_GNU = /usr/include/x86_64-linux-gnu
INCLUDE_PRJ = ../include 
INCLUDE_MYSQL = /usr/include/mysql
INCLUDE_JSON = ../json


INCLUDE += -I$(INCLUDE_GNU)

INCLUDE += -I$(INCLUDE_PRJ)

INCLUDE += -I$(INCLUDE_MYSQL)



CPPFLAGS = -g3 -ggdb -Wall -ansi



CFlAGS_XML = `xml2-config --cflags`

LIBS_XML = `xml2-config --libs`

LIB_PTHREAD = -lpthread
LIB_JSON = -ljson_linux-gcc-4.7_libmt
LIB_MYSQL= `mysql_config --cflags --libs`

LIBS += $(LIBS_XML)

LIBS += $(LIB_PTHREAD)

LIBS += $(LIB_JSON)

LIBS += $(LIB_MYSQL)

OBJ_MAIN_FILE = main.cpp
OBJ_XMLCFG_FILE = xmlcfg.cpp
OBJ_BOOTCFG_FILE = bootcfg.cpp
OBJ_SVRTHREAD_FILE = svrthread.cpp
OBJ_JSONWRAP_FILE = jsonwrap.cpp
OBJ_DBPARAMBINDING_FILE = DBParamBinding.cpp
OBJ_DBLIB_FILE = DBLib.cpp
OBJ_DBLIBHELPER_FILE = DBLibHelper.cpp

OBJ_SVRDISPATCH_FILE = svrdispatch.cpp

OBJ_JSONREADER_FILE = JsonReader.cpp
OBJ_JSONWRITER_FILE = JsonWriter.cpp
OBJ_JSONVALUE_FILE = JsonValue.cpp



OBJ_MAIN = main.o
OBJ_XMLCFG = xmlcfg.o
OBJ_BOOTCFG = bootcfg.o
OBJ_SVRTHREAD = svrthread.o
OBJ_JSONWRAP = jsonwrap.o
OBJ_DBLIB = DBLib.o
OBJ_DBLIBHELPER = DBLibHelper.o
OBJ_DBPARAMBINDING = DBParamBinding.o

OBJ_JSONREADER = JsonReader.o
OBJ_JSONWRITER = JsonWriter.o
OBJ_JSONVALUE = JsonValue.o
OBJ_SVRDISPATCH = svrdispatch.o

$(OBJ_BOOTCFG):$(OBJ_BOOTCFG_FILE)
	$(CC)  -I$(INCLUDE)  $(CPPFLAGS) -c  $(OBJ_BOOTCFG_FILE)

$(OBJ_MAIN): $(OBJ_MAIN_FILE)
	$(CC)  -I$(INCLUDE)  $(CPPFLAGS) -c $(OBJ_MAIN_FILE)

$(OBJ_XMLCFG): $(OBJ_XMLCFG_FILE)
	$(CC)  -I$(INCLUDE)  $(CPPFLAGS) $(CFlAGS_XML) -c  $(OBJ_XMLCFG_FILE)

$(OBJ_SVRTHREAD): $(OBJ_SVRTHREAD_FILE)
	$(CC)  -I$(INCLUDE)  $(CPPFLAGS) $(CFlAGS_XML) -c  $(OBJ_SVRTHREAD_FILE)

$(OBJ_JSONWRAP) : $(OBJ_JSONWRAP_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(OBJ_JSONWRAP_FILE)

$(OBJ_DBLIBHELPER) : $(OBJ_DBLIBHELPER_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT) $(CPPFLAGS)  -c  $(OBJ_DBLIBHELPER_FILE)

$(OBJ_DBLIB) : $(OBJ_DBLIB_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT)  $(CPPFLAGS)  -c  $(OBJ_DBLIB_FILE)

$(OBJ_DBPARAMBINDING) : $(OBJ_DBPARAMBINDING_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT)  $(CPPFLAGS)  -c  $(OBJ_DBPARAMBINDING_FILE)

$(OBJ_JSONREADER) : $(OBJ_JSONREADER_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(OBJ_JSONREADER_FILE)

$(OBJ_JSONWRITER) : $(OBJ_JSONWRITER_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(OBJ_JSONWRITER_FILE)

$(OBJ_JSONVALUE) : $(OBJ_JSONVALUE_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT) -I$(INCLUDE_JSON) $(CPPFLAGS)  -c  $(OBJ_JSONVALUE_FILE)

$(OBJ_SVRDISPATCH) : $(OBJ_SVRDISPATCH_FILE)
	$(CPLUSPLUS) -I$(INCLUDE) -I$(INCLUDE_PARENT)  $(CPPFLAGS)  -c  $(OBJ_SVRDISPATCH_FILE)





OBJ_LIST = $(OBJ_MAIN)
OBJ_LIST += $(OBJ_XMLCFG)
OBJ_LIST += $(OBJ_BOOTCFG)
OBJ_LIST += $(OBJ_JSONWRAP)
OBJ_LIST += $(OBJ_DBPARAMBINDING)
OBJ_LIST += $(OBJ_DBLIB)

OBJ_LIST += $(OBJ_DBLIBHELPER)

OBJ_LIST += $(OBJ_JSONREADER)

OBJ_LIST += $(OBJ_JSONWRITER)

OBJ_LIST += $(OBJ_JSONVALUE)
OBJ_LIST += $(OBJ_SVRTHREAD)
OBJ_LIST += $(OBJ_SVRDISPATCH)






npsvr:$(OBJ_LIST)
	$(CPLUSPLUS)  -o npsvr $(OBJ_LIST) $(LIBS) 

clean:
	-rm *.o  npsvr*
